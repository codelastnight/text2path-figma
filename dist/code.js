!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}({13:function(t,e,n){"use strict";n.r(e);var r=function(t,e){const n=[];for(let r=0;r<t.length;r++){const o=n[n.length-1];o&&o.length!==e?o.push(t[r]):n.push([t[r]])}return n},o=function(t,e){return[[t[0][0]*e[0][0]+t[0][1]*e[1][0],t[0][0]*e[0][1]+t[0][1]*e[1][1],t[0][0]*e[0][2]+t[0][1]*e[1][2]+t[0][2]],[t[1][0]*e[0][0]+t[1][1]*e[1][0],t[1][0]*e[0][1]+t[1][1]*e[1][1]+0,t[1][0]*e[0][2]+t[1][1]*e[1][2]+t[1][2]]]},i=function(t,e){return[[1,0,t],[0,1,e]]},a=function(t){return[[Math.cos(t),Math.sin(t),0],[-Math.sin(t),Math.cos(t),0]]},l=function(t){const e=function(t){let e=t.split("M");if(e.shift(),e.length>1)throw"TOO MANY LINES!!!1111 this only supports one continous vector";let n=[];var o=e[0].trim().split(/ L|C /),i=[];for(var a in o){var l=r(o[a].trim().split(" "),2);l.unshift(i),i=l[l.length-1],n.push(l)}return n.shift(),n}(t);for(var n in e)for(var o in e[n]){const t={x:e[n][o][0],y:e[n][o][1]};e[n][o]=t}return e},c=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},s=function(t,e,n,r){t.x=Number(t.x),t.y=Number(t.y),e.x=Number(e.x),e.y=Number(e.y);const o=(e.x-t.x)/r,i=(e.y-t.y)/r;return{x:t.x+o*n,y:t.y+i*n}},u=function(t,e,n,r,o){const i=Math.cos(o*Math.PI/180)*n;return s(t,e,i,r)},f=function(t,e,n,r=!1){let o=[];for(var i=0;i<t.length-1;i++){c(t[i],t[i+1]);let a=s(t[i],t[i+1],e,n);if(o.push(a),r){let e=Math.atan((t[i+1].x-t[i].x)/(t[i+1].y-t[i].y))*(180/Math.PI);e=90+e,t[i+1].y-t[i].y<0&&(e=180+e),a.angle=e}}return o},g=function(t,e=100,n=!1,r){let o=[];if(2==t.length)for(var i=1;i<e;i++){let r=f(t,i,e,n);o.push(r)}else for(i=1;i<=e;i++){let a=f(f(f(t,i,e),i,e),i,e,n)[0];if(o.length>0){const t=c(o[o.length-1],a);a.dist=t,a.totalDist=t+o[o.length-1].totalDist,r=a.totalDist}else a.dist=0,a.totalDist=r;o.push(a)}return o},h=function(t,e=100,n=!0){let r=[],o=l(t),i=0;for(var a in o)r.push(...g(o[a],e,n,i)),i=r[r.length-1].totalDist;return r},p=function(t){return t.replace(" ",String.fromCharCode(8197))};function y(t,e,n){const r=[],l=[...t.characters];let c,s=0,f=0;for(let g=0;g<l.length;g++){let h,y=figma.createText();for(y.fontName=t.getRangeFontName(g,g+1),y.fontSize=t.getRangeFontSize(g,g+1),y.characters=p(l[g]+" "),y.letterSpacing=t.getRangeLetterSpacing(g,g+1),y.textAlignVertical="CENTER",y.textAutoResize="WIDTH_AND_HEIGHT",console.log(s);f<e.length;f++)if(s<=e[f].totalDist){let t=e[f+1];const n=s-e[f].totalDist;c=t.angle,h=u(e[f],t,n,t.dist,c);break}s+=y.width;y.width,y.height;let m=(c-180)*Math.PI/180;y.x=0,y.y=0,y.rotation=0,y.relativeTransform=o(a(m),y.relativeTransform),y.relativeTransform=o(i(h.x+n.x,h.y+n.y),y.relativeTransform),y.characters=p(l[g]),r.push(y),figma.currentPage.appendChild(y)}let g=n.clone();r.push(g),figma.currentPage.selection=r,figma.viewport.scrollAndZoomIntoView(r)}var m=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}))};figma.showUI(__html__,{width:300,height:400}),figma.ui.onmessage=t=>m(void 0,void 0,void 0,(function*(){"do-the-thing"===t.type&&(clearInterval(x),function(){m(this,void 0,void 0,(function*(){let t;figma.currentPage.selection.filter(e=>{"VECTOR"===e.type&&(t=e)});const e=h(t.vectorPaths[0].data,300);t.rotation=0;for(const n of figma.currentPage.selection){if("VECTOR"==n.type||"ELLIPSE"==n.type){let t;"ELLIPSE"==n.type&&(t=figma.flatten([n]));h(t.vectorPaths[0].data);figma.closePlugin()}if("TEXT"===n.type){let r=n.characters.length;for(let t=0;t<r;t++)yield figma.loadFontAsync(n.getRangeFontName(t,t+1));(n.width>e[e.length-1].totalDist||1==figma.hasMissingFont)&&figma.closePlugin("text path is too long!  please make it shorter than the curve!"),y(n,e,t);let o=[figma.group(figma.currentPage.selection,n.parent)];figma.currentPage.selection=o}}figma.closePlugin()}))}()),"cancel"===t.type&&figma.closePlugin("k"),"svg"===t.type&&(console.log(t.vectorLengths),t.vectors,t.vectorLengths,t.x,t.y,figma.closePlugin())}));let v="";var d=function(t){v!=t&&(figma.ui.postMessage({type:"selection",value:t}),v=t)};var x=setInterval((function(){const t=figma.currentPage.selection;switch(t.length){case 2:t.filter(t=>"VECTOR"===t.type).length>0||t.filter(t=>"ELLIPSE"===t.type).length>0?1==t.filter(t=>"TEXT"===t.type).length?d("text"):d("clone"):d("nocurve");break;case 1:d("one");break;case 0:d("nothing");break;default:d("toomany")}}),600)}});